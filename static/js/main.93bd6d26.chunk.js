(this.webpackJsonpreact_voice_chess=this.webpackJsonpreact_voice_chess||[]).push([[0],{19:function(e,n,t){e.exports=t.p+"static/media/failure.5acd1a08.mp3"},20:function(e,n,t){e.exports=t.p+"static/media/success.e0d006dd.wav"},24:function(e,n,t){e.exports=t(48)},29:function(e,n,t){},36:function(e,n,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},37:function(e,n,t){},38:function(e,n,t){},40:function(e,n,t){var i={"./donation_request.wav":41,"./ear.png":42,"./failure.mp3":19,"./mic.svg":43,"./success.wav":20};function o(e){var n=a(e);return t(n)}function a(e){if(!t.o(i,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=a,e.exports=o,o.id=40},41:function(e,n,t){e.exports=t.p+"static/media/donation_request.a661a105.wav"},42:function(e,n,t){e.exports=t.p+"static/media/ear.20e2bf1a.png"},43:function(e,n,t){e.exports=t.p+"static/media/mic.90f18d92.svg"},44:function(e,n,t){},45:function(e,n,t){},46:function(e,n,t){},47:function(e,n,t){e.exports=t.p+"static/media/finally.5f759873.wav"},48:function(e,n,t){"use strict";t.r(n);var i=t(0),o=t.n(i),a=t(13),s=t.n(a),c=(t(29),t(6)),r=(t(36),t(37),t(12)),l=function(e){return{type:"TRY_MOVE",payload:e}},u=function(){return{type:"CLEAR_MOVE",payload:""}},d=function(e){return{type:"SET_POSITION",payload:e}},h=function(e){return{type:"SET_PLAYER_SIDE",payload:e}},_={pending_move:null,fen_position:null,player_side:null};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"TRY_MOVE":var t=n.payload;return Object.assign({},e,{pending_move:t});case"SET_PLAYER_SIDE":var i=n.payload;return Object.assign({},e,{player_side:i});case"CLEAR_MOVE":return Object.assign({},e,{pending_move:null});case"SET_POSITION":var o=n.payload;return Object.assign({},e,{fen_position:o,pending_move:null});default:return e}},m=t(4),v=function(e){return{type:"SEND_COMMAND",payload:e}},f=function(){return{type:"CLEAR_COMMAND"}},g={pending_command:null,commands_history:[]};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SEND_COMMAND":var t=n.payload;return Object.assign({},e,{pending_command:t,commands_history:[].concat(Object(m.a)(e.commands_history),[t])});case"CLEAR_COMMAND":return Object.assign({},e,{pending_command:null});default:return e}},k=function(e){return{type:"ADD_PENDING_SENTENCE",payload:e}},b=function(){return{type:"CLEAR_PENDING_SENTENCES",payload:null}},w={pending_sentences:[]};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_PENDING_SENTENCE":var t=n.payload;console.log("adding pending sentence: ",t),console.log("sentences before adding: ",e.pending_sentences);var i=Object(m.a)(e.pending_sentences);return i.includes(t)||i.push(t),Object.assign({},e,{pending_sentences:i});case"REMOVE_PENDING_SENTENCE":var o=n.payload;return Object.assign({},e,{pending_sentences:e.pending_sentences.slice(o,1)});case"CLEAR_PENDING_SENTENCES":return Object.assign({},e,{pending_sentences:[]});default:return e}},O=Object(r.b)({game:p,general:y,voice_interface:E}),j=Object(r.c)(O,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),x=t(1),N=t(2),S=t(7),C=t(5),D=t(3),R=t(8),B=t(9),A=t.n(B),L=function(){function e(){Object(x.a)(this,e),this.game=new A.a,this.last_move=null,this.player_types={w:"human",b:"computer"};var n=window.STOCKFISH;this.engine="function"===typeof n?n():new Worker("stockfish.js"),this.engine_ready=!1,this.depth=2,this.engine.onmessage=this.on_engine_message.bind(this)}return Object(N.a)(e,[{key:"on_success_move",value:function(e){}},{key:"on_check",value:function(e){}},{key:"on_checkmate",value:function(e){}},{key:"on_win",value:function(e){}},{key:"on_draw",value:function(){}},{key:"on_stalemate",value:function(){}},{key:"on_insufficient_material",value:function(){}},{key:"on_repetition",value:function(){}},{key:"on_illegal_move",value:function(e){}},{key:"on_opponent_move",value:function(e){}},{key:"set_depth",value:function(e){this.depth=e}},{key:"new_game",value:function(){this.game.reset()}},{key:"load_position",value:function(e){this.game.fen()!==e&&(console.log("different fen position loaded"),this.game.load(e))}},{key:"get_side_to_move",value:function(){var e=this.game.turn();return"w"===e?"white":"b"===e?"black":void 0}},{key:"set_player_side",value:function(e){"black"===e?(this.player_types.b="human",this.player_types.w="computer"):"black"===e&&(this.player_types.b="computer",this.player_types.w="human"),this.check_computer_response()}},{key:"start_engine",value:function(){console.log("starting engine"),this.engine_ready||setTimeout(function(){this.send_engine_message("uci"),this.setTimeout(function(){this.start_engine()}.bind(this),100)}.bind(this),100)}},{key:"send_engine_message",value:function(e){this.engine.postMessage(e)}},{key:"on_engine_message",value:function(e){var n;if(n=e&&"object"===typeof e?e.data.trim():e.trim(),console.log("gamehandler engine: "+n),"uciok"===n&&(this.engine_ready=!0),"bestmove"===n.split(" ")[0]){var t=n.match(/^bestmove ([a-h][1-8])([a-h][1-8])([qrbn])?/);if(t){var i=this.game.move({from:t[1],to:t[2],promotion:t[3]}),o=this.game.history().slice(-1)[0];i&&(this.game.undo(),console.log("undo correct")),console.log({last_move:o}),(i=this.try_move(o))?this.on_opponent_move(o):(console.log("gameHandler.try_move was unsuccessful for move:",o),console.log("game moves:",this.game.history()))}}}},{key:"request_engine_move",value:function(){var e="position fen "+this.game.fen(),n="go  wtime 3000 winc 1500 btime 3000 binc 1500 depth "+this.depth.toString();this.send_engine_message(e),this.send_engine_message(n)}},{key:"check_position_events",value:function(){this.game.in_draw()&&this.on_draw(),this.game.insufficient_material()&&this.on_insufficient_material(),this.game.in_threefold_repetition()&&this.on_repetition(),this.game.in_stalemate()&&this.on_stalemate(),this.game.in_check()&&this.on_check(this.game.turn()),this.game.in_checkmate()&&this.on_checkmate(this.game.turn()),this.on_win(this.game.turn())}},{key:"check_computer_response",value:function(){"computer"===this.player_types[this.game.turn()]&&this.request_engine_move()}},{key:"take_back",value:function(){if("computer"!==this.player_types[this.game.turn()]){var e=this.game.undo(),n=this.game.undo();null===e||null==n?console.log("take back error (",e,",",n,")"):(console.log("taken back to: ",this.game.fen()),this.game.history().length>1?(console.log({moves:this.game.history()}),this.last_move=this.game.history().slice(-1).pop()):this.last_move=null)}}},{key:"try_move",value:function(e){return console.log("gameHandler: ",e),null===this.game.move(e)?(console.log(e+" is illegal"),this.on_illegal_move(e),!1):(this.last_move=e,this.on_success_move(e),this.check_position_events(),this.check_computer_response(),!0)}}]),e}(),T=function(){function e(){Object(x.a)(this,e),console.log("first sqare for exd5:",this.get_first_square("exd5"))}return Object(N.a)(e,[{key:"get_first_square",value:function(e){var n=e;return n=this.remove_special_chars(n),n=(n=(n=this.remove_pieces(n)).replace("x","")).slice(0,-2)}},{key:"get_piece",value:function(e){return e.includes("Q")?"queen":e.includes("R")?"rook":e.includes("B")?"bishop":e.includes("N")?"knight":e.includes("K")||e.includes("O-O")||e.includes("O-O-O")?"king":"pawn"}},{key:"remove_special_chars",value:function(e){var n=e;return["+","-",",",".","*","#","="].forEach((function(e){n=n.split(e).join("")})),n}},{key:"remove_pieces",value:function(e){var n=e;return["Q","B","R","K","N"].forEach((function(e){n=n.split(e).join("")})),n}},{key:"get_takes",value:function(e){return e.includes("x")?"takes":""}},{key:"get_destination",value:function(e){var n=e,t="";if(e.includes("O-O-O"))return"castle queen side";if(e.includes("O-O"))return"castle king side";e.includes("+")?(n=n.split("+").join(""),t=", check"):e.includes("#")&&(n=n.split("#").join(""),t=", checkmate");var i=n.split("=");return i.length>1?(n=i[0].substr(-2),n+=" promotion to "+this.get_piece(i[1])):n=n.substr(-2),n+t}}]),e}(),q=t(22),I=t.n(q),P=(t(38),function(e){function n(e){var t;return Object(x.a)(this,n),(t=Object(S.a)(this,Object(C.a)(n).call(this,e))).state={},t.game_handler=new L,t.move_converter=new T,t.game_handler.on_success_move=function(e,n){t.props.set_position(t.game_handler.game.fen())},t.game_handler.on_illegal_move=function(e){console.log("move "+e+" is illegal")},t.game_handler.on_checkmate=t.on_checkmate.bind(Object(D.a)(t)),t.game_handler.on_repetition=t.on_repetition.bind(Object(D.a)(t)),t.game_handler.on_insufficient_material=t.on_insufficient_material.bind(Object(D.a)(t)),t.game_handler.on_opponent_move=function(e){var n=t.move_converter.get_piece(e),i=t.move_converter.get_first_square(e),o=t.move_converter.get_destination(e),a=t.move_converter.get_takes(e),s=""!==a?"":" his ",c=""!==a?" takes ":" to ";t.props.add_voice_sentence("your opponent has moved "+s+n+i+c+o)},t}return Object(R.a)(n,e),Object(N.a)(n,[{key:"on_checkmate",value:function(e){"w"==e?this.props.add_voice_sentence("chekmate, black wins"):this.props.add_voice_sentence("chekmate, white wins")}},{key:"on_repetition",value:function(){this.props.add_voice_sentence("Draw by threefold repetition")}},{key:"on_insufficient_material",value:function(){this.props.add_voice_sentence("Draw by insufficient material")}},{key:"repeat",value:function(){var e=this.game_handler.last_move;if(console.log("repeating",e),e){var n=this.move_converter.get_piece(e),t=this.move_converter.get_first_square(e),i=this.move_converter.get_destination(e),o=this.move_converter.get_takes(e);this.props.add_voice_sentence(n+" "+t+" "+o+" "+i+". "+this.game_handler.get_side_to_move()+" to move")}else this.props.player_side?this.props.add_voice_sentence("starting position. white to move"):this.props.add_voice_sentence("Do you want to play white? or black")}},{key:"componentDidMount",value:function(){var e=this;console.log("handler mounted"),setTimeout((function(){e.props.add_voice_sentence("Do you want to play white? or black")}),3e3)}},{key:"componentDidUpdate",value:function(e,n){console.log("handler updated"),this.props.fen_position?this.game_handler.load_position(this.props.fen_position):this.game_handler.new_game(),this.props.player_side&&this.game_handler.set_player_side(this.props.player_side);var t=this.props.pending_move;null!=t?(console.log(t),this.game_handler.try_move(t)):this.props.set_position(this.game_handler.game.fen()),this.props.pending_command&&this.execute_command(this.props.pending_command)}},{key:"set_player_side",value:function(e){this.props.set_player_side(e),"white"==e&&this.props.add_voice_sentence("You play white.")}},{key:"take_back",value:function(){this.game_handler.take_back(),this.props.set_position(this.game_handler.game.fen())}},{key:"game_help",value:function(){this.props.add_voice_sentence("\n        The game uses standard algebraic notation, for instance e4, Knight f6, d takes e5, Knight takes e4 or castle kingside\n        "),this.props.add_voice_sentence("\n        You can say show board to show the game position at any moment\xa0for five seconds\n        "),this.props.add_voice_sentence("\n        say repeat to hear the last move\n        "),this.props.add_voice_sentence("\n        Say new game when you want to start a new game\n        ")}},{key:"execute_command",value:function(e){var n=e;if(n.includes("difficulty")){var t=parseInt(n.split(" ")[1]);this.game_handler.set_depth(t),this.props.add_voice_sentence("difficulty changed to "+t.toString()),this.props.clear_pending_command()}else"show board"===n?("none"==this.refs.board.style.display?this.refs.board.style.display="flex":this.refs.board.style.display="none",this.props.clear_pending_command()):"new game"===n?(this.props.set_position(null),this.props.clear_pending_command()):"white"===n||"black"===n?(this.props.clear_pending_command(),this.props.player_side||this.set_player_side(n)):"repeat"===n?(this.repeat(),this.props.clear_pending_command()):"help"===n?(this.game_help(),this.props.clear_pending_command()):"back"===n&&(this.take_back(),this.props.clear_pending_command())}},{key:"render",value:function(){var e=this.props.fen_position;null==this.props.fen_position&&(e="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1");var n=this.props.player_side?this.props.player_side:"white";return o.a.createElement("div",null,o.a.createElement("div",{ref:"board",className:"board"},o.a.createElement(I.a,{id:"humanVsHuman",width:320,position:e,orientation:n,boardStyle:{borderRadius:"5px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.5)"}})))}}]),n}(i.Component)),M=Object(c.b)((function(e){return{pending_move:e.game.pending_move,pending_command:e.general.pending_command,fen_position:e.game.fen_position,player_side:e.game.player_side}}),(function(e){return{set_position:function(n){e(d(n))},set_player_side:function(n){e(h(n))},clear_pending_move:function(){e(u())},clear_pending_command:function(){e(f())},try_move:function(n){e(l(n))},add_voice_sentence:function(n){e(k(n))}}}))(P),H=t(17),z=t.n(H),G=t(23),U=function(){function e(){Object(x.a)(this,e),this.is_ispeaking=!1,window.speechSynthesis.onvoiceschanged=function(e){this.voice=this.get_voice()}.bind(this)}return Object(N.a)(e,[{key:"get_voice",value:function(e){for(var n=speechSynthesis.getVoices(),t=[],i=0;i<n.length;i++){var o=n[i];"en-US"===o.lang&&t.push(o)}return t[1]}},{key:"on_speak_start",value:function(){}},{key:"on_speak_end",value:function(){}},{key:"speak_started",value:function(){console.log("speak started"),this.is_ispeaking=!0}},{key:"speak_ended",value:function(){var e=this;setTimeout((function(){console.log("speak ended"),e.is_ispeaking=!1}),600)}},{key:"is_audio_file",value:function(e){return!!e.includes(".mp3")||!!e.includes(".wav")}},{key:"speak",value:function(e){var n=this;return console.log("speaking:",e),new Promise((function(i,o){if(n.is_audio_file(e)){var a=t(40)("./"+e),s=document.createElement("audio");s.src=a,s.onended=function(){this.speak_ended(),i()}.bind(n),s.play(),n.speak_started()}else{var c=new SpeechSynthesisUtterance;c.text=e,c.volume=1,c.rate=1,c.pitch=1,c.voice=n.voice,c.onend=function(){n.speak_ended(),i()}.bind(n),window.speechSynthesis.speak(c),n.speak_started(),console.log("waiting for speaking to end")}}))}}]),e}(),V=window.SpeechRecognition||window.webkitSpeechRecognition,F=window.SpeechGrammarList||window.webkitSpeechGrammarList,K=function(){function e(){Object(x.a)(this,e),this.recently_received_command=null,this.interpreters_list=[],this.recognition=new V,this.speechRecognitionList=new F,this.speechRecognitionList.addFromString("#JSGF V1.0; grammar coords; public <letterweights> = /150/ B | /0/ beet | /0/ beat;public <coordletter> = A | B | C | D | E | F | G | H | a | b | c | d | e | f | g | h;public <coordnumber> = 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8;public <coord> = <coordletter> <coordnumber>;public <coords> = A1 | B1 | C1 | D1 | E1 | F1 | G1 | H1 | A2 | B2 | C2 | D2 | E2 | F2 | G2 | H2 | A3 | B3 | C3 | D3 | E3 | F3 | G3 | H3 | A4 | B4 | C4 | D4 | E4 | F4 | G4 | H4 | A5 | B5 | C5 | D5 | E5 | F5 | G5 | H5 | A6 | B6 | C6 | D6 | E6 | F6 | G6 | H6 | A7 | B7 | C7 | D7 | E7 | F7 | G7 | H7 | A8 | B8 | C8 | D8 | E8 | F8 | G8 | H8 | <coord>;public <move> = <coords> <coords>;public <beerule> = /80/ B8 | /0/ V8;",1),this.recognition.grammars=this.speechRecognitionList,this.recognition.continuous=!0,this.recognition.lang="en-US",this.recognition.interimResults=!0,this.recognition.maxAlternatives=5,this.last_command="",this.command_found=!1,this.current_command="",this.candidate_word="",this.current_confidence=0,this.is_listening=!0,this.recognition.onresult=this.process_result.bind(this),this.recognition.onspeechend=function(){},this.recognition.onend=function(e){this.on_end()}.bind(this),this.recognition.onstart=function(e){this.on_start()}.bind(this),this.recognition.onnomatch=function(e){this.start()}.bind(this),this.recognition.onerror=function(e){}}return Object(N.a)(e,[{key:"on_result",value:function(e){}},{key:"on_end",value:function(){}},{key:"on_start",value:function(){}},{key:"on_read_success",value:function(){}},{key:"on_read_failure",value:function(){}},{key:"on_received_command",value:function(e){}},{key:"delay_same_command",value:function(e){var n=this;this.recently_received_command=e,setTimeout((function(){n.recently_received_command=null}),5e3)}},{key:"add_interpreter",value:function(e){this.interpreters_list.push(e)}},{key:"stop_listening",value:function(){this.recognition.stop()}},{key:"listen",value:function(){try{this.recognition.start()}catch(e){}}},{key:"start",value:function(){try{this.recognition.start()}catch(e){}}},{key:"process_result",value:function(e){if(!this.is_listening)return e.preventDefault(),void console.log("not listening");console.log("on result");for(var n=e.results[e.results.length-1],t=Array.from(n),i=0;i<t.length;i++){var o=t[i].transcript;this.on_result(o);for(var a=0;a<this.interpreters_list.length;a++){var s=this.interpreters_list[a].interpret(o);if(null!==s)return console.log("interpreted_result:",s),void(s!=this.recently_received_command&&(this.delay_same_command(s),this.on_received_command(s),this.read_success()))}}this.read_failure()}},{key:"read_success",value:function(){this.is_listening&&this.on_read_success()}},{key:"read_failure",value:function(){this.is_listening&&this.on_read_failure()}}]),e}(),W={menu:["men u","man u","men you","man you"],back:["backs"],help:["help","whelp","helped","hell","helps","hep","health","hil"],yes:["just","yeast","jazz"],no:[],new:[],game:[],repeat:[],difficulty:[],1:["one"],2:["too","to","two"],3:["tree","three"],4:["for","forth","four","pork"],5:["five","fight"],show:["shows","cho","chau"],board:["bored","bord","boards","bard"],black:["Blanc"],white:["wight","Whyte","wide"]},Q={board:"show board",show:"show board",game:"new game"},Y=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(x.a)(this,e),this.allowed_commands=["no","yes","show board","difficulty 1","difficulty 2","difficulty 3","difficulty 4","difficulty 5","show board","new game","repeat","black","back","white","help"],this.game=new A.a,n&&(this.game=n)}return Object(N.a)(e,[{key:"transform_words",value:function(e){for(var n=e,t=n.split(" "),i=0;i<t.length;i++){var o=t[i];if(null!=Q[o])return Q[o]}return n}},{key:"interpret",value:function(e){var n=e.toLowerCase();return n=this.get_rid_of_signs(n),n=this.replace_words(n),n=this.remove_remaining(n),n=this.transform_words(n),this.allowed_commands.includes(n)?n:null}},{key:"get_rid_of_signs",value:function(e){for(var n=["-",".",",","?",";",":"],t=e,i=0;i<n.length;i++){var o=n[i];t=t.split(o).join("")}return t}},{key:"replace_all",value:function(e,n,t){var i=new RegExp("\\b"+n+"\\b","g");return e.replace(i,t)}},{key:"replace_words",value:function(e){var n=this,t=e,i=W;return Object.keys(i).forEach((function(e){i[e].forEach((function(i){t=n.replace_all(t,i,e)}))})),t}},{key:"remove_remaining",value:function(e){var n=[].concat(Object(m.a)(Object.keys(W)),Object(m.a)(this.allowed_commands)),t=[];return e.split(" ").forEach((function(e){n.includes(e)&&t.push(e)})),t.join(" ")}}]),e}(),X=["a","b","c","d","e","f","g","h"],J=["1","2","3","4","5","6","7","8"],$=[];X.forEach((function(e){J.forEach((function(n){$.push(e+n)}))}));var Z={1:["one"],2:["too","to","two"],3:["tree","three","trip"],4:["for","forth","four","pork"],5:["five","fight"],6:["six","sex"],7:["seven","heaven"],8:["eight","ate","aid","j"]},ee={a:[],b:["bee","be","beat"],c:["see","sea","cee","ce"],d:["dee","de","the","thee","deep"],e:["he","in","eat","heat","it"],f:["if","ef","of","off"],g:["ge","gee"],h:["age"]},ne={"O-O":["castle king","castle king side"],"O-O-O":["castle queen","castle queen side"],K:["king","keen","Qing","kin","Ken","kings"],Q:["queen","queens"],R:["rock","broad","brought","rocks","rook","rooks","root","rooke"],B:["bishop","push up","bishops"],N:["knight","nite","night","might","nice","nike","knights","nights"],x:["takes","taste","thanks","text","take"]},te={go:["goat","gold","goal","no"]},ie={a1:["81","8 1"],a2:["82","8 2"],a3:["83","8 3"],a4:["84","8 4"],a5:["85","8 5"],a6:["86","8 6","asics"],a7:["87","8 7"],a8:["aa","88"],b4:["before"],e4:["fo"],e8:["yet"],"x e":["tracy","tasty"],"R x":["rockface"],"R e":["rocky"],ax:["a x"],bx:["b x"],cx:["c x"],dx:["d x"],ex:["e x"],fx:["f x"],gx:["g x"],hx:["h x"]},oe=[["xe","xc"]],ae=function(){function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(x.a)(this,e),this.cached_piece=null,this.cached_first_square=null,this.cached_destination=null,this.cached_takes=null,this.cached_castle=null,this.timeout_id=null,this.second_square_allowed=!1,this.accepted_move=null,this.can_clean_cache=!0,this.possible_squares=[],this.game=new A.a}return Object(N.a)(e,[{key:"on_recognition_change",value:function(e){}},{key:"recognition_change",value:function(){var e=this.cached_castle?this.cached_castle:"",n=this.cached_piece?this.cached_piece:"",t=this.cached_takes?this.cached_takes:"",i=e+n+(this.cached_first_square?this.cached_first_square:"")+t+(this.cached_destination?this.cached_destination:"");this.on_recognition_change(i)}},{key:"start_cleaning_timeout_counter",value:function(){var e=this;null!=this.timeout_id&&clearTimeout(this.timeout_id),this.timeout_id=setTimeout((function(){e.clean_move_cache()}),5e3)}},{key:"clean_move_cache",value:function(){var e=this;this.can_clean_cache&&(console.log("move cache cleaned"),this.on_recognition_change("---"),this.can_clean_cache=!1,this.cached_piece=null,this.cached_first_square=null,this.cached_destination=null,this.cached_takes=null,this.cached_castle=null,this.second_square_allowed=!1,this.accepted_move=null,this.possible_squares=[],setTimeout((function(){e.can_clean_cache=!0}),1e3))}},{key:"recognize_takes",value:function(e){e.includes("x")&&(this.cached_takes="x")}},{key:"recognize_castle",value:function(e){return e.includes("O-O-O")?(this.cached_castle="O-O-O",!0):!!e.includes("O-O")&&(this.cached_castle="O-O",!0)}},{key:"recognize_piece",value:function(e){for(var n=["K","Q","R","B","N"],t=e.split(""),i=0;i<t.length;i++){var o=t[i];if(n.includes(o)){this.cached_piece=o;break}}}},{key:"recognize_squares",value:function(e){if(null===this.cached_destination){var n=[].concat(X,$);if(null===this.cached_first_square)for(var t=0;t<n.length;t++){var i=n[t];e.includes(i)&&(this.possible_squares.includes(i)||this.possible_squares.push(i))}}}},{key:"get_recognition_state",value:function(){return(this.cached_piece?this.cached_piece:"")+(this.cached_takes?this.cached_takes:"")}},{key:"recognize_features",value:function(e){var n=this.get_recognition_state();this.recognize_castle(e)||(this.recognize_piece(e),this.recognize_squares(e),this.recognize_takes(e),n!==this.get_recognition_state()&&this.recognition_change())}},{key:"create_move",value:function(e,n,t,i){return i?(e||"")+(n||"")+(t||"")+(i||""):null}},{key:"get_homophone_options",value:function(e){for(var n=[],t=!1,i=0;i<oe.length;i++)for(var o=oe[i],a=0;a<o.length;a++){var s=o[a];if(e.includes(s))for(var c=0;c<o.length;c++){var r=o[c];n.push(e.split(s).join(r)),t=!0}}return t?n:[e]}},{key:"get_legal_homophone",value:function(e){console.log("received option for homophones:",e);for(var n=this.get_homophone_options(e),t=0;t<n.length;t++){var i=n[t];if(this.is_legal_move(i))return i;console.log(i,"not legal")}return null}},{key:"get_legal_move",value:function(){if(this.cached_castle&&this.is_legal_move(this.cached_castle))return this.cached_castle;for(var e=this.possible_squares.filter((function(e){return 2===e.length})),n=0;n<e.length;n++){var t=e[n],i=this.create_move(this.cached_piece,null,this.cached_takes,t),o=this.get_legal_homophone(i);if(null!==o)return o}for(var a=this.possible_squares.filter((function(e){return 1===e.length})),s=0;s<a.length;s++)for(var c=a[s],r=0;r<e.length;r++){var l=e[r],u=this.create_move(this.cached_piece,c,this.cached_takes,l),d=this.get_legal_homophone(u);if(null!==d)return d}for(var h=0;h<e.length;h++)for(var _=e[h],p=0;p<e.length;p++){var m=e[p];if(_!==m){var v=this.create_move(this.cached_piece,_,this.cached_takes,m),f=this.get_legal_homophone(v);if(null!==f)return f}}return null}},{key:"set_game_position",value:function(e){e&&this.game.load(e)}},{key:"is_legal_move",value:function(e){return null!==this.game.move(e)&&(this.game.undo(),!0)}},{key:"detect_go",value:function(e){var n=e;return(n=this.replace_go(n)).includes("go")&&(this.clean_move_cache(),n=n.replace("go","")),n}},{key:"interpret",value:function(e){var n=e.toLowerCase();if(n=this.detect_go(n),n=this.get_rid_of_signs(n),n=" "+(n=this.separate_numbers(n))+" ",n=this.replace_words(n),n=this.replace_numbers(n),n=this.replace_letters(n),n=this.replace_general(n),n=this.remove_remaining(n),n=this.remove_spaces(n),n=this.replace_general(n),console.log("possible_move:",n),this.recognize_features(n),this.start_cleaning_timeout_counter(),null!==(n=this.get_legal_move(n))){if(this.accepted_move===n)return null;this.accepted_move=n,this.on_recognition_change(n),n="move:"+n,console.log(n)}return n}},{key:"get_rid_of_signs",value:function(e){for(var n=["-",".",",","?",";",":"],t=e,i=0;i<n.length;i++){var o=n[i];t=t.split(o).join("")}return t}},{key:"replace_all",value:function(e,n,t){var i=new RegExp("\\b"+n+"\\b","g");return e.replace(i,t)}},{key:"replace_words",value:function(e){var n=this,t=e,i=ne;return Object.keys(i).forEach((function(e){i[e].forEach((function(i){t=n.replace_all(t,i,e)}))})),t}},{key:"replace_general",value:function(e){var n=e,t=ie;return Object.keys(t).forEach((function(e){t[e].forEach((function(t){n=n.split(t).join(e)}))})),n}},{key:"separate_numbers",value:function(e){var n=e;return n=(n=(n=(n=(n=(n=(n=(n=n.split("1").join(" 1")).split("2").join(" 2")).split("3").join(" 3")).split("4").join(" 4")).split("5").join(" 5")).split("6").join(" 6")).split("7").join(" 7")).split("8").join(" 8")}},{key:"replace_numbers",value:function(e){var n=this,t=e,i=Z;return Object.keys(i).forEach((function(e){i[e].forEach((function(i){t=n.replace_all(t,i,e)}))})),t}},{key:"replace_letters",value:function(e){var n=this,t=e,i=ee;return Object.keys(i).forEach((function(e){i[e].forEach((function(i){t=n.replace_all(t,i,e)}))})),t}},{key:"replace_go",value:function(e){var n=this,t=e,i=te;return Object.keys(i).forEach((function(e){i[e].forEach((function(i){t=n.replace_all(t,i,e)}))})),t}},{key:"is_coordinate",value:function(e){return!(2!==e.length||!X.includes(e[0])||!J.includes(e[1]))}},{key:"remove_remaining",value:function(e){var n=this,t=["ax","bx","cx","dx","ex","fx","gx","hx"].concat(Object(m.a)(Object.keys(ee)),Object(m.a)(Object.keys(Z)),Object(m.a)(Object.keys(ne))),i=[];return e.split(" ").forEach((function(e){(t.includes(e)||n.is_coordinate(e))&&i.push(e)})),i.join(" ")}},{key:"remove_spaces",value:function(e){return e.split(" ").join("")}}]),e}(),se=function(){function e(){Object(x.a)(this,e),this.pending_move=null}return Object(N.a)(e,[{key:"on_not_recognized_command",value:function(e){}},{key:"on_rejected_move",value:function(){}},{key:"on_command_success",value:function(e){}},{key:"on_command_failure",value:function(e){}},{key:"on_move",value:function(e){}},{key:"on_move_save",value:function(e){}},{key:"is_move",value:function(e){return!!e.includes("move:")&&(console.log("===================================="),console.log(e+" is move"),console.log("===================================="),!0)}},{key:"get_move",value:function(e){var n=e.split("move:");return n.length>1?n[1]:""}},{key:"is_move_ready",value:function(e){return null!==this.pending_move}},{key:"save_pending_move",value:function(e){this.pending_move=e,this.on_move_save(e)}},{key:"clear_pending_move",value:function(){this.pending_move=null}},{key:"execute_command",value:function(e){switch(console.log("readed:"+e),e){case"yes":this.is_move_ready()&&(this.on_move(this.pending_move),this.clear_pending_move());break;case"no":this.is_move_ready()&&(console.log("rejected move"),this.on_rejected_move());break;default:if(this.is_move(e)){this.save_pending_move(this.get_move(e));break}return e&&this.on_not_recognized_command(e),void this.on_command_failure(e)}this.on_command_success(e)}}]),e}();function ce(){return(ce=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}function re(e,n){if(null==e)return{};var t,i,o=function(e,n){if(null==e)return{};var t,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var le=o.a.createElement("g",null,o.a.createElement("rect",{fill:"none",height:24,width:24}),o.a.createElement("rect",{fill:"none",height:24,width:24}),o.a.createElement("rect",{fill:"none",height:24,width:24})),ue=o.a.createElement("g",null,o.a.createElement("g",null),o.a.createElement("g",null,o.a.createElement("path",{d:"M12,14c1.66,0,3-1.34,3-3V5c0-1.66-1.34-3-3-3S9,3.34,9,5v6C9,12.66,10.34,14,12,14z"}),o.a.createElement("path",{d:"M17,11c0,2.76-2.24,5-5,5s-5-2.24-5-5H5c0,3.53,2.61,6.43,6,6.92V21h2v-3.08c3.39-0.49,6-3.39,6-6.92H17z"}))),de=function(e){var n=e.svgRef,t=e.title,i=re(e,["svgRef","title"]);return o.a.createElement("svg",ce({enableBackground:"new 0 0 24 24",height:24,viewBox:"0 0 24 24",width:24,ref:n},i),t?o.a.createElement("title",null,t):null,le,ue)},he=o.a.forwardRef((function(e,n){return o.a.createElement(de,ce({svgRef:n},e))})),_e=(t.p,t(10)),pe=t.n(_e),me=(t(44),t(19)),ve=t(20),fe=function(e){function n(e){var t;return Object(x.a)(this,n),(t=Object(S.a)(this,Object(C.a)(n).call(this,e))).state={},t.wait_before_moving_again=!1,t.can_speak=!1,t.can_listen=!1,t.coord_listener=new K,t.move_interpreter=new ae,t.move_converter=new T,t.move_interpreter.on_recognition_change=t.on_recognition_change.bind(Object(D.a)(t)),t.ui_interpreter=new Y,t.coord_listener.add_interpreter(t.move_interpreter),t.coord_listener.add_interpreter(t.ui_interpreter),t.commands_handler=new se,t.coord_listener.on_received_command=t.commands_handler.execute_command.bind(t.commands_handler),t.speaker=new U,t.commands_handler.on_move_save=t.on_move_save.bind(Object(D.a)(t)),t.commands_handler.on_move=t.on_move.bind(Object(D.a)(t)),t.commands_handler.on_command_success=t.command_success.bind(Object(D.a)(t)),t.commands_handler.on_command_failure=t.command_failure.bind(Object(D.a)(t)),t.commands_handler.on_rejected_move=t.move_interpreter.clean_move_cache.bind(t.move_interpreter),t.commands_handler.on_not_recognized_command=t.on_not_recognized_command.bind(Object(D.a)(t)),t.coord_listener.on_result=t.on_result.bind(Object(D.a)(t)),t.coord_listener.on_read_success=t.command_success.bind(Object(D.a)(t)),t.coord_listener.on_end=function(){t.refs.mic_icon.classList.add("inactive"),t.refs.mic_icon.classList.remove("active")},t.coord_listener.on_start=function(){t.refs.mic_icon.classList.add("active"),t.refs.mic_icon.classList.remove("inactive")},t.speaker.on_speak_start=t.stop_listening.bind(Object(D.a)(t)),t.speaker.on_speak_end=t.listen.bind(Object(D.a)(t)),t}return Object(R.a)(n,e),Object(N.a)(n,[{key:"add_sentence",value:function(e){this.props.add_voice_sentence(e)}},{key:"on_recognition_change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={K:'<span class="chessfont">k</span>',N:'<span class="chessfont">n</span>',B:'<span class="chessfont">b</span>',R:'<span class="chessfont">r</span>',Q:'<span class="chessfont">q</span>'},t=e;Object.keys(n).forEach((function(e){t=t.split(e).join(n[e])})),console.log("resutl for chess font: ",t),this.refs.move.innerHTML=t}},{key:"on_result",value:function(e){}},{key:"on_move_save",value:function(e){if(this.wait_before_moving_again)console.log("waiting before moving again");else{console.log("moving "+e);var n=this.move_converter.get_piece(e),t=this.move_converter.get_destination(e),i=this.move_converter.get_first_square(e),o=this.move_converter.get_takes(e),a=""!==o?" ":" your ",s=""!==o?" takes ":" to ";this.add_sentence("you moved "+a+n+" "+i+s+t),this.props.move(e),this.wait_before_moving_again=!0,setTimeout(function(){console.log("waiting set to false"),this.wait_before_moving_again=!1}.bind(this),3e3)}}},{key:"on_move",value:function(e){this.props.move(e),this.add_sentence("done")}},{key:"stop_listening",value:function(){console.log("stopped listening"),this.coord_listener.stop_listening()}},{key:"listen",value:function(){this.can_listen&&(console.log("started listening"),this.coord_listener.listen())}},{key:"command_success",value:function(){try{document.getElementById("success-audio").play()}catch(e){}}},{key:"on_not_recognized_command",value:function(e){this.props.send_command(e)}},{key:"command_failure",value:function(e){}},{key:"componentDidMount",value:function(){var e=this;document.body.onclick=function(){this.can_listen&&this.coord_listener.start(),this.can_speak=!0}.bind(this),document.addEventListener("keypress",(function(n){"Space"===n.code&&(e.can_listen&&e.coord_listener.start(),e.can_speak=!0)})),document.getElementById("commands-trigger").addEventListener("click",(function(e){e.stopPropagation(),pe.a.fire("Commands","<div>show board: toggle board visibility</div><div>new game: start a new game</div><div>repeat: repeat last move</div><div>help: hear instructions</div><div></div>"),document.getElementsByClassName("swal2-container")[0].addEventListener("click",(function(e){e.stopPropagation()}))}))}},{key:"set_chess_engine",value:function(e){this.move_interpreter.replace_game_handler(e)}},{key:"check_pending_sentences",value:function(){var e=this;!this.speaker.is_ispeaking&&this.can_speak?this.speak_pending_sentences():setTimeout((function(){e.check_pending_sentences()}),1e3)}},{key:"componentDidUpdate",value:function(e,n){this.check_pending_sentences(),this.move_interpreter.set_game_position(this.props.fen_position)}},{key:"sentences_spoken",value:function(){this.speak_pending_sentences()}},{key:"speak_pending_sentences",value:function(){var e=Object(G.a)(z.a.mark((function e(){var n,t,i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.coord_listener.stop_listening(),this.can_listen=!1,!(this.props.pending_sentences.length>0)){e.next=14;break}n=this.props.pending_sentences,this.props.clear_sentences(),t=0;case 6:if(!(t<n.length)){e.next=13;break}return i=n[t],e.next=10,this.speaker.speak(i);case 10:t++,e.next=6;break;case 13:this.sentences_spoken();case 14:this.can_listen=!0;case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{id:"voice-interface"},o.a.createElement(he,{ref:"mic_icon",className:"mic-icon inactive"}),o.a.createElement("h1",{ref:"move"},"---"),o.a.createElement("audio",{id:"success-audio",src:ve},"Your browser does not support the",o.a.createElement("code",null,"audio")," element."),o.a.createElement("audio",{id:"failure-audio",src:me},"Your browser does not support the",o.a.createElement("code",null,"audio")," element."),o.a.createElement("p",{className:"hints"}),o.a.createElement("div",null,o.a.createElement("p",{className:"touch message"},o.a.createElement("em",null,"touch the screen or press spacebar to talk"))))}}]),n}(i.Component),ge=Object(c.b)((function(e){return{fen_position:e.game.fen_position,pending_sentences:e.voice_interface.pending_sentences}}),(function(e){return{move:function(n){e(l(n))},add_voice_sentence:function(n){e(k(n))},clear_sentences:function(){e(b())},send_command:function(n){e(v(n))}}}))(fe);t(45);function ye(){return(ye=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}function ke(e,n){if(null==e)return{};var t,i,o=function(e,n){if(null==e)return{};var t,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var be=o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),we=o.a.createElement("path",{id:"heart-icon",d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),Ee=function(e){var n=e.svgRef,t=e.title,i=ke(e,["svgRef","title"]);return o.a.createElement("svg",ye({height:24,viewBox:"0 0 24 24",width:24,ref:n},i),t?o.a.createElement("title",null,t):null,be,we)},Oe=o.a.forwardRef((function(e,n){return o.a.createElement(Ee,ye({svgRef:n},e))})),je=(t.p,t(46),t(47)),xe=(new Audio(je),function(e){function n(){var e,t;Object(x.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=Object(S.a)(this,(e=Object(C.a)(n)).call.apply(e,[this].concat(o)))).state={show:!1},t}return Object(R.a)(n,e),Object(N.a)(n,[{key:"render_paypal_button",value:function(e){document.getElementById("ppbtn").innerHTML="",window.paypal.Buttons({createOrder:function(n,t){return t.order.create({purchase_units:[{amount:{value:e}}],application_context:{shipping_preference:"NO_SHIPPING"}})},onApprove:function(e,n){return n.order.capture().then((function(e){}))}}).render("#ppbtn")}},{key:"clickHandler",value:function(e){e.stopPropagation();var n=this;pe.a.mixin({customClass:{confirmButton:"btn btn-secondary",cancelButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"Support the project",html:'\n        <form class="" autocomplete="off">\n            <div class = "form-group text-left">\n                <div class="form-check">\n                    <input class="form-check-input" type="radio" name="price-select" id="price1" value=2 checked>\n                    <label class="form-check-label" for="price1">\n                        I liked the project (2 USD)\n                    </label>\n                </div>\n                <div class="form-check">\n                    <input class="form-check-input" type="radio" name="price-select" id="price2" value=5>\n                    <label class="form-check-label" for="price2">\n                        I really loved it (5 USD)\n                    </label>\n                </div>\n                <div class="form-check">\n                    <input class="form-check-input" type="radio" name="price-select" id="price3" value=10>\n                    <label class="form-check-label" for="price3">\n                        I was really waiting for this (10 USD)\n                    </label>\n                </div>\n                <div class="form-check">\n                    <input class="form-check-input" type="radio" name="price-select" id="price4" value=30>\n                    <label class="form-check-label" for="price4">\n                        I\'d like to see a future version (30 USD)\n                    </label>\n                </div>\n                <div class="form-check input-group">\n                    <div >\n                        <input class="form-check-input" type="radio" name="price-select" id="custom-price" value=5>\n                        <label class="form-check-label input-group" for="custom-price">\n                           <div class="input-group-prepend form-control input-group-text ">Other</div> \n                           <input class="form-control" type="number" id="custom-price-input" value = 5 disabled>\n                        </label>\n                    </div>\n                </div>\n            </div>\n        </form>\n        <div id="ppbtn"></div>\n        ',confirmButtonText:"I can't right now"}),this.render_paypal_button(document.querySelector('input[name="price-select"]:checked').value),document.getElementsByClassName("swal2-container")[0].addEventListener("click",(function(e){e.stopPropagation()}));for(var t=document.getElementsByName("price-select"),i=0;i<t.length;i++){t[i].addEventListener("change",(function(){this.checked&&("custom-price"==this.id?(document.getElementById("custom-price-input").disabled=!1,n.render_paypal_button(this.value)):(n.render_paypal_button(this.value),document.getElementById("custom-price-input").disabled=!0))}))}document.getElementById("custom-price-input").addEventListener("input",(function(){!this.value||this.value<1?this.classList.add("is-invalid"):(this.classList.remove("is-invalid"),n.render_paypal_button(this.value))}))}},{key:"componentDidMount",value:function(){var e=this;document.getElementById("donate-btn").addEventListener("click",(function(n){e.clickHandler(n)}))}},{key:"componentDidUpdate",value:function(){var e=this;document.getElementById("donate-btn").addEventListener("click",(function(n){e.clickHandler(n)}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{id:"donate-btn"},"Support my work \xa0",o.a.createElement(Oe,{className:"donate-icon"})))}}]),n}(i.Component)),Ne=Object(c.b)((function(e){return{}}),(function(e){return{add_voice_sentence:function(n){e(k(n))}}}))(xe),Se=t(11),Ce=t.n(Se),De=function(e){function n(){var e,t;Object(x.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=Object(S.a)(this,(e=Object(C.a)(n)).call.apply(e,[this].concat(o)))).state={},t}return Object(R.a)(n,e),Object(N.a)(n,[{key:"componentDidMount",value:function(){Ce()(document).ready((function(){Ce()(document).click((function(e){var n=Ce()(e.target),t=Ce()(".navbar-collapse").hasClass("show");console.log("opened:",t),console.log("has_class:",n.hasClass("navbar-toggle")),!0!==t||n.hasClass("navbar-toggle")||Ce()(".navbar-collapse").removeClass("show")}))})),document.getElementById("about-trigger").addEventListener("click",(function(e){e.stopPropagation(),pe.a.fire("About","<div>This is a voice controlled chess game for blindfold play practice</div><div>Developer contact: eidiazcas@gmail.com</div>")}))}},{key:"render",value:function(){return o.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark "},o.a.createElement("a",{className:"navbar-brand",href:"#"},o.a.createElement("img",{src:"/Chess-icon.png",width:"30",height:"30",className:"d-inline-block align-top",alt:""}),"\xa0 V-CHESS"),o.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbar-collapse","aria-controls":"navbar-collapse","aria-expanded":"false","aria-label":"Toggle navigation"},o.a.createElement("span",{className:"navbar-toggler-icon"})),o.a.createElement("div",{className:"collapse navbar-collapse",id:"navbar-collapse"},o.a.createElement("ul",{className:"navbar-nav ml-auto"},o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"nav-link",id:"about-trigger"},"About")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"nav-link",id:"commands-trigger"},"Voice commands list")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"nav-link"},o.a.createElement(Ne,null)))),o.a.createElement("form",{className:"form-inline my-2 my-md-0"})))}}]),n}(i.Component),Re=Object(c.b)((function(e){return{}}),(function(e){return{}}))(De),Be=function(e){function n(e){var t;return Object(x.a)(this,n),(t=Object(S.a)(this,Object(C.a)(n).call(this,e))).state={hasError:!1},t}return Object(R.a)(n,e),Object(N.a)(n,[{key:"componentDidCatch",value:function(e,n){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?o.a.createElement("div",{style:{padding:"10%"}},o.a.createElement("div",{class:"alert alert-danger",role:"alert"},"This browser doesn't support SpeechRecognition API, try it on chrome for PC or Android")):this.props.children}}]),n}(i.Component);var Ae=function(){return o.a.createElement(c.a,{store:j},o.a.createElement("div",{className:"App"},o.a.createElement(Be,null,o.a.createElement(Re,null),o.a.createElement(M,null),o.a.createElement(ge,null))))},Le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Te(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(o.a.createElement(Ae,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/vchess",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/vchess","/service-worker.js");Le?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var i=t.headers.get("content-type");404===t.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Te(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Te(n,e)}))}}()}},[[24,1,2]]]);
//# sourceMappingURL=main.93bd6d26.chunk.js.map